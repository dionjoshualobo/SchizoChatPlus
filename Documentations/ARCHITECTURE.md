# ğŸ—ï¸ System Architecture Overview

## ğŸ“ High-Level Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         USER INTERFACE                          â”‚
â”‚                    (React + Socket.io Client)                   â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚   Chat UI    â”‚  â”‚ Visualization â”‚  â”‚   Settings   â”‚        â”‚
â”‚  â”‚  (Existing)  â”‚  â”‚   Dashboard   â”‚  â”‚  (Existing)  â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                           â”‚                                     â”‚
â”‚                           â–¼                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚         Network Visualization Components             â”‚      â”‚
â”‚  â”‚  â€¢ Network Topology  â€¢ Packet Animation             â”‚      â”‚
â”‚  â”‚  â€¢ IDS Analytics     â€¢ Relay Status                 â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                 â”‚   WebSocket Events    â”‚
                 â”‚   (Socket.io)         â”‚
                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      BACKEND SERVER                              â”‚
â”‚                   (Node.js + Express)                            â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                   Event Bus                             â”‚   â”‚
â”‚  â”‚  (Central event emission & coordination)                â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                             â”‚                                   â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚         â”‚                  â”‚                   â”‚               â”‚
â”‚         â–¼                  â–¼                   â–¼               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚  Tor Layer  â”‚  â”‚  IDS Layer  â”‚  â”‚  API Layer  â”‚          â”‚
â”‚  â”‚ (Member 1)  â”‚  â”‚ (Member 2)  â”‚  â”‚ (Member 4)  â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚         â”‚                  â”‚                   â”‚               â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                             â”‚                                   â”‚
â”‚                             â–¼                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                  Packet Tracker                         â”‚   â”‚
â”‚  â”‚  (Track message journey through network)                â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                             â”‚                                   â”‚
â”‚                             â–¼                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                 MongoDB Database                        â”‚   â”‚
â”‚  â”‚  â€¢ Users  â€¢ Messages  â€¢ Packet Logs  â€¢ IDS Events      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Message Flow (Tor Routing)

```
User A wants to send: "Hello World"
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 1: Circuit Builder selects random path               â”‚
â”‚ Path: Entry-1 â†’ Middle-2 â†’ Exit-1                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 2: Onion Encryption (3 layers)                       â”‚
â”‚                                                            â”‚
â”‚ Layer 3 (innermost):                                      â”‚
â”‚   { message: "Hello World", receiver: "UserB" }           â”‚
â”‚        â†“ Encrypt with Exit-1's public key                â”‚
â”‚                                                            â”‚
â”‚ Layer 2:                                                  â”‚
â”‚   { payload: [encrypted layer 3], nextHop: "Exit-1" }    â”‚
â”‚        â†“ Encrypt with Middle-2's public key              â”‚
â”‚                                                            â”‚
â”‚ Layer 1 (outermost):                                      â”‚
â”‚   { payload: [encrypted layer 2], nextHop: "Middle-2" }  â”‚
â”‚        â†“ Encrypt with Entry-1's public key               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 3: Entry Node (Entry-1)                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚ IDS Inspection                              â”‚          â”‚
â”‚  â”‚ â€¢ Check packet size                         â”‚          â”‚
â”‚  â”‚ â€¢ Validate structure                        â”‚          â”‚
â”‚  â”‚ â€¢ Run detection rules                       â”‚          â”‚
â”‚  â”‚ â†’ Decision: ALLOW / FLAG / BLOCK            â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚         â”‚                                                  â”‚
â”‚         â–¼ (if allowed)                                    â”‚
â”‚  Decrypt Layer 1 with private key                         â”‚
â”‚  â†’ Reveals: nextHop = "Middle-2"                          â”‚
â”‚  â†’ Latency: 50-150ms                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 4: Middle Node (Middle-2)                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚ IDS Inspection                              â”‚          â”‚
â”‚  â”‚ â€¢ Check packet size                         â”‚          â”‚
â”‚  â”‚ â€¢ Validate structure                        â”‚          â”‚
â”‚  â”‚ â€¢ Run detection rules                       â”‚          â”‚
â”‚  â”‚ â†’ Decision: ALLOW / FLAG / BLOCK            â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚         â”‚                                                  â”‚
â”‚         â–¼ (if allowed)                                    â”‚
â”‚  Decrypt Layer 2 with private key                         â”‚
â”‚  â†’ Reveals: nextHop = "Exit-1"                            â”‚
â”‚  â†’ Latency: 100-250ms                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 5: Exit Node (Exit-1)                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚ IDS Inspection                              â”‚          â”‚
â”‚  â”‚ â€¢ Check packet size                         â”‚          â”‚
â”‚  â”‚ â€¢ Validate structure                        â”‚          â”‚
â”‚  â”‚ â€¢ Check for malicious content               â”‚          â”‚
â”‚  â”‚ â€¢ SQL injection detection                   â”‚          â”‚
â”‚  â”‚ â€¢ XSS detection                             â”‚          â”‚
â”‚  â”‚ â†’ Decision: ALLOW / FLAG / BLOCK            â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚         â”‚                                                  â”‚
â”‚         â–¼ (if allowed)                                    â”‚
â”‚  Decrypt Layer 3 with private key                         â”‚
â”‚  â†’ Reveals: { message: "Hello World", receiver: "UserB" } â”‚
â”‚  â†’ Latency: 75-200ms                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
   Deliver to User B
   Total Latency: ~225-600ms
```

---

## ğŸ›¡ï¸ IDS Detection Flow

```
Packet arrives at relay node
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Packet Inspector                  â”‚
â”‚  1. Extract metadata               â”‚
â”‚     â€¢ Size, structure, content     â”‚
â”‚  2. Validate packet structure      â”‚
â”‚  3. Calculate packet size          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â–¼                    â–¼                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Rule Engine    â”‚  â”‚ Anomaly Detectorâ”‚  â”‚ Behavioral      â”‚
â”‚                 â”‚  â”‚                 â”‚  â”‚ Analysis        â”‚
â”‚ â€¢ SQL Injection â”‚  â”‚ â€¢ Statistical   â”‚  â”‚ â€¢ User history  â”‚
â”‚ â€¢ XSS Attack    â”‚  â”‚ â€¢ ML-based (AI) â”‚  â”‚ â€¢ Rate limiting â”‚
â”‚ â€¢ Oversized     â”‚  â”‚ â€¢ Deviation     â”‚  â”‚ â€¢ Patterns      â”‚
â”‚ â€¢ Malformed     â”‚  â”‚   detection     â”‚  â”‚                 â”‚
â”‚ â€¢ Rate limit    â”‚  â”‚                 â”‚  â”‚                 â”‚
â”‚ â€¢ Null bytes    â”‚  â”‚ Risk: 0-100     â”‚  â”‚ Risk: 0-100     â”‚
â”‚                 â”‚  â”‚                 â”‚  â”‚                 â”‚
â”‚ Risk: 0-100     â”‚  â”‚                 â”‚  â”‚                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                    â”‚                    â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ Combine Risk     â”‚
                    â”‚ Scores           â”‚
                    â”‚ Total: 0-100     â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ Determine Action â”‚
                    â”‚                  â”‚
                    â”‚ â‰¥80: BLOCK       â”‚
                    â”‚ â‰¥50: FLAG        â”‚
                    â”‚ <50: ALLOW       â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â–¼                    â–¼                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ BLOCK           â”‚  â”‚ FLAG            â”‚  â”‚ ALLOW           â”‚
â”‚ â€¢ Drop packet   â”‚  â”‚ â€¢ Log warning   â”‚  â”‚ â€¢ Log normal    â”‚
â”‚ â€¢ Log event     â”‚  â”‚ â€¢ Allow packet  â”‚  â”‚ â€¢ Forward packetâ”‚
â”‚ â€¢ Create alert  â”‚  â”‚ â€¢ Monitor       â”‚  â”‚                 â”‚
â”‚ â€¢ Notify admin  â”‚  â”‚                 â”‚  â”‚                 â”‚
â”‚   (if critical) â”‚  â”‚                 â”‚  â”‚                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                    â”‚                    â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ Event Logger     â”‚
                    â”‚ â€¢ Save to DB     â”‚
                    â”‚ â€¢ Emit to UI     â”‚
                    â”‚ â€¢ Update stats   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š Component Interaction Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        FRONTEND                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚  â”‚ useNetworkStoreâ”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”¤usePacketStore  â”‚                â”‚
â”‚  â”‚ (Member 3)     â”‚         â”‚ (Member 4)     â”‚                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚         â–²                           â–²                          â”‚
â”‚         â”‚                           â”‚                          â”‚
â”‚         â”‚        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚         â”‚        â”‚  networkSocket.js          â”‚               â”‚
â”‚         â”‚        â”‚  (Member 4)                â”‚               â”‚
â”‚         â”‚        â”‚  â€¢ Connects to backend     â”‚               â”‚
â”‚         â”‚        â”‚  â€¢ Listens to events       â”‚               â”‚
â”‚         â”‚        â”‚  â€¢ Updates stores          â”‚               â”‚
â”‚         â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚         â”‚                       â”‚                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚    WebSocket Events   â”‚
          â”‚    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>  â”‚
          â”‚    <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         â”‚                       â”‚                    BACKEND   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚         â”‚                       â”‚                              â”‚
â”‚         â”‚        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚         â”‚        â”‚  socket.js                 â”‚               â”‚
â”‚         â”‚        â”‚  â€¢ Socket.io server        â”‚               â”‚
â”‚         â”‚        â”‚  â€¢ Emits events            â”‚               â”‚
â”‚         â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚         â”‚                       â”‚                              â”‚
â”‚         â”‚        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¤  Event Bus                 â”‚               â”‚
â”‚                  â”‚  (Member 4)                â”‚               â”‚
â”‚                  â”‚  â€¢ Central hub             â”‚               â”‚
â”‚                  â”‚  â€¢ Coordinates components  â”‚               â”‚
â”‚                  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”˜               â”‚
â”‚                         â”‚                 â”‚                   â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚         â–¼                    â–¼                    â–¼           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ Tor System  â”‚â”€â”€â”€â”€â–¶â”‚ IDS System  â”‚     â”‚ API Routes  â”‚    â”‚
â”‚  â”‚ (Member 1)  â”‚     â”‚ (Member 2)  â”‚     â”‚ (Member 4)  â”‚    â”‚
â”‚  â”‚             â”‚     â”‚             â”‚     â”‚             â”‚    â”‚
â”‚  â”‚ â€¢ Relays    â”‚     â”‚ â€¢ Inspector â”‚     â”‚ â€¢ Network   â”‚    â”‚
â”‚  â”‚ â€¢ Circuits  â”‚     â”‚ â€¢ Rules     â”‚     â”‚ â€¢ IDS       â”‚    â”‚
â”‚  â”‚ â€¢ Encryptionâ”‚     â”‚ â€¢ Anomaly   â”‚     â”‚ â€¢ Stats     â”‚    â”‚
â”‚  â”‚ â€¢ Routing   â”‚     â”‚ â€¢ Logger    â”‚     â”‚             â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚         â”‚                    â”‚                    â”‚           â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                              â”‚                                â”‚
â”‚                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚                   â”‚  Packet Tracker     â”‚                    â”‚
â”‚                   â”‚  (Member 4)         â”‚                    â”‚
â”‚                   â”‚  â€¢ Tracks journey   â”‚                    â”‚
â”‚                   â”‚  â€¢ Calculates stats â”‚                    â”‚
â”‚                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚                              â”‚                                â”‚
â”‚                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚                   â”‚  MongoDB            â”‚                    â”‚
â”‚                   â”‚  â€¢ PacketLog        â”‚                    â”‚
â”‚                   â”‚  â€¢ IDSEvent         â”‚                    â”‚
â”‚                   â”‚  â€¢ User             â”‚                    â”‚
â”‚                   â”‚  â€¢ Message          â”‚                    â”‚
â”‚                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ—‚ï¸ Directory Structure

```
SchizoChatPlus/
â”‚
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ tor/                    â† Member 1
â”‚   â”‚   â”‚   â”œâ”€â”€ relayNode.js
â”‚   â”‚   â”‚   â”œâ”€â”€ circuitBuilder.js
â”‚   â”‚   â”‚   â”œâ”€â”€ encryptionLayer.js
â”‚   â”‚   â”‚   â”œâ”€â”€ routingEngine.js
â”‚   â”‚   â”‚   â”œâ”€â”€ latencySimulator.js
â”‚   â”‚   â”‚   â””â”€â”€ torConfig.js
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ ids/                    â† Member 2
â”‚   â”‚   â”‚   â”œâ”€â”€ packetInspector.js
â”‚   â”‚   â”‚   â”œâ”€â”€ ruleEngine.js
â”‚   â”‚   â”‚   â”œâ”€â”€ anomalyDetector.js
â”‚   â”‚   â”‚   â”œâ”€â”€ actionHandler.js
â”‚   â”‚   â”‚   â”œâ”€â”€ eventLogger.js
â”‚   â”‚   â”‚   â””â”€â”€ idsConfig.js
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ lib/                    â† Member 4 + existing
â”‚   â”‚   â”‚   â”œâ”€â”€ eventBus.js         â† Member 4
â”‚   â”‚   â”‚   â”œâ”€â”€ packetTracker.js    â† Member 4
â”‚   â”‚   â”‚   â”œâ”€â”€ socket.js           â† Existing (modify)
â”‚   â”‚   â”‚   â”œâ”€â”€ db.js               â† Existing
â”‚   â”‚   â”‚   â””â”€â”€ utils.js            â† Existing
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ controllers/
â”‚   â”‚   â”‚   â”œâ”€â”€ network.controller.js â† Member 4
â”‚   â”‚   â”‚   â”œâ”€â”€ ids.controller.js     â† Member 2
â”‚   â”‚   â”‚   â”œâ”€â”€ message.controller.js â† Existing (Member 1 modifies)
â”‚   â”‚   â”‚   â””â”€â”€ auth.controller.js    â† Existing
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ routes/
â”‚   â”‚   â”‚   â”œâ”€â”€ network.route.js    â† Member 4
â”‚   â”‚   â”‚   â”œâ”€â”€ ids.route.js        â† Member 2
â”‚   â”‚   â”‚   â”œâ”€â”€ message.route.js    â† Existing
â”‚   â”‚   â”‚   â””â”€â”€ auth.route.js       â† Existing
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â”‚   â”œâ”€â”€ packetLog.model.js  â† Member 2
â”‚   â”‚   â”‚   â”œâ”€â”€ idsEvent.model.js   â† Member 2
â”‚   â”‚   â”‚   â”œâ”€â”€ message.model.js    â† Existing
â”‚   â”‚   â”‚   â””â”€â”€ user.model.js       â† Existing
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ index.js                â† Existing (modify)
â”‚   â”‚
â”‚   â””â”€â”€ package.json
â”‚
â”œâ”€â”€ frontend/
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â”‚   â”œâ”€â”€ NetworkVisualizationPage.jsx â† Member 3
â”‚   â”‚   â”‚   â”œâ”€â”€ HomePage.jsx        â† Existing
â”‚   â”‚   â”‚   â”œâ”€â”€ LoginPage.jsx       â† Existing
â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ components/             â† Member 3
â”‚   â”‚   â”‚   â”œâ”€â”€ NetworkTopology.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ PacketFlowAnimation.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ IDSAnalytics.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ RelayStatus.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ PacketInspector.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ SecurityAlerts.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ Navbar.jsx          â† Existing (modify)
â”‚   â”‚   â”‚   â””â”€â”€ ...                 â† Existing
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ store/
â”‚   â”‚   â”‚   â”œâ”€â”€ useNetworkStore.js  â† Member 3
â”‚   â”‚   â”‚   â”œâ”€â”€ usePacketStore.js   â† Member 4
â”‚   â”‚   â”‚   â”œâ”€â”€ useAuthStore.js     â† Existing
â”‚   â”‚   â”‚   â””â”€â”€ useChatStore.js     â† Existing
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ lib/
â”‚   â”‚   â”‚   â”œâ”€â”€ networkSocket.js    â† Member 4
â”‚   â”‚   â”‚   â”œâ”€â”€ axios.js            â† Existing
â”‚   â”‚   â”‚   â””â”€â”€ utils.js            â† Existing
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â”‚   â””â”€â”€ useNetworkData.js   â† Member 4
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ App.jsx                 â† Existing (modify)
â”‚   â”‚   â””â”€â”€ main.jsx                â† Existing
â”‚   â”‚
â”‚   â””â”€â”€ package.json
â”‚
â”œâ”€â”€ docs/
â”‚   â”œâ”€â”€ TEAM_WORK_DISTRIBUTION.md
â”‚   â”œâ”€â”€ QUICK_REFERENCE.md
â”‚   â”œâ”€â”€ PROJECT_SUMMARY.md
â”‚   â”œâ”€â”€ WORK_DISTRIBUTION_VISUAL.md
â”‚   â””â”€â”€ START_HERE.md
â”‚
â”œâ”€â”€ README.md
â””â”€â”€ package.json
```

---

## ğŸ” Data Models

### PacketLog (MongoDB)
```javascript
{
  packetId: "uuid",
  circuitId: "uuid",
  relayNode: "entry" | "middle" | "exit",
  senderId: ObjectId,
  receiverId: ObjectId,
  size: Number,
  action: "allowed" | "blocked" | "flagged",
  riskScore: Number (0-100),
  flags: ["R001", "R003", ...],
  timestamp: Date,
  processingTime: Number (ms)
}
```

### IDSEvent (MongoDB)
```javascript
{
  eventId: "uuid",
  eventType: "packet_blocked" | "packet_flagged" | "suspicious_activity" | ...,
  severity: "low" | "medium" | "high" | "critical",
  relayNode: String,
  packetId: String,
  ruleTriggered: ["R001", "R003", ...],
  details: Object,
  resolved: Boolean,
  timestamp: Date
}
```

### RelayNode (In-Memory)
```javascript
{
  id: "entry-1",
  type: "entry" | "middle" | "exit",
  status: "active" | "inactive",
  publicKey: RSA Public Key,
  privateKey: RSA Private Key,
  packetsProcessed: Number,
  startTime: Timestamp
}
```

### Circuit (In-Memory)
```javascript
{
  id: "uuid",
  path: [entryNode, middleNode, exitNode],
  createdAt: Timestamp,
  packetsRouted: Number
}
```

---

## ğŸ¨ Frontend State Management

### useNetworkStore (Zustand)
```javascript
{
  relayNodes: [],
  activeCircuit: null,
  recentPackets: [],
  packetStats: { allowed: 0, blocked: 0, flagged: 0 },
  idsEvents: [],
  
  setRelayNodes: (nodes) => {...},
  addPacket: (packet) => {...},
  updatePacketStats: (stats) => {...},
  addIDSEvent: (event) => {...}
}
```

### usePacketStore (Zustand)
```javascript
{
  activePackets: Map<packetId, packet>,
  completedPackets: [],
  
  addPacket: (packet) => {...},
  updatePacketProgress: (data) => {...},
  completePacket: (packetId) => {...},
  getPacketById: (packetId) => {...}
}
```

---

## ğŸš€ API Endpoints

### Network APIs (Member 4)
```
GET  /api/network/nodes          â†’ Get all relay nodes
GET  /api/network/circuits        â†’ Get active circuits
GET  /api/network/statistics      â†’ Get packet statistics
GET  /api/network/packets/:id     â†’ Get packet journey
GET  /api/network/health          â†’ Get network health
```

### IDS APIs (Member 2)
```
GET  /api/ids/events              â†’ Get IDS events
GET  /api/ids/packets             â†’ Get packet logs
GET  /api/ids/statistics          â†’ Get IDS statistics
GET  /api/ids/rules               â†’ Get detection rules
PUT  /api/ids/rules/:id           â†’ Update rule (enable/disable)
```

### Existing APIs
```
POST /api/auth/signup             â†’ User registration
POST /api/auth/login              â†’ User login
POST /api/auth/logout             â†’ User logout
GET  /api/messages/users          â†’ Get users for sidebar
GET  /api/messages/:id            â†’ Get messages with user
POST /api/messages/send/:id       â†’ Send message (modified by Member 1)
```

---

## ğŸ”” WebSocket Events

### Emitted by Backend
```javascript
'tor:packet_progress'        â†’ Packet moved to next node
'tor:packet_delivered'       â†’ Packet reached destination
'network:packet_progress'    â†’ Detailed packet progress
'network:ids_event'          â†’ IDS event occurred
'network:relay_status'       â†’ Relay node status changed
'network:statistics_update'  â†’ Statistics updated
'newMessage'                 â†’ Message delivered (existing)
```

### Listened by Frontend
```javascript
socket.on('network:packet_progress', (data) => {
  usePacketStore.getState().updatePacketProgress(data);
});

socket.on('network:ids_event', (event) => {
  useNetworkStore.getState().addIDSEvent(event);
});
```

---

## ğŸ“ˆ Performance Targets

- **Message Routing:** 225-600ms total latency
- **IDS Processing:** <50ms per packet
- **Database Write:** <100ms per log entry
- **UI Update:** <16ms (60fps animations)
- **API Response:** <200ms average

---

## ğŸ¯ Success Criteria

### System Level
- âœ… Messages route through 3 relay nodes
- âœ… Each relay decrypts one encryption layer
- âœ… IDS inspects packets at each hop
- âœ… Malicious packets are blocked
- âœ… All events are logged
- âœ… Real-time visualization works
- âœ… System handles 10+ concurrent users

### Code Quality
- âœ… Modular architecture
- âœ… Clear separation of concerns
- âœ… Consistent coding style
- âœ… Error handling implemented
- âœ… Code is documented
- âœ… No critical bugs

---

**This architecture enables parallel development while maintaining clean integration points!** ğŸ—ï¸
